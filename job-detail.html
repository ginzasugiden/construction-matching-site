<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>求人詳細 | 建設現場監督マッチング</title>
    <meta name="description" content="建設業界の現場監督求人の詳細情報をご覧いただけます。">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
    
    <style>
        /* Job Detail Page Specific Styles */
        .job-detail-page {
            background-color: var(--gray-50);
            min-height: 100vh;
        }
        
        .job-detail-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: var(--spacing-xl) var(--spacing-md);
        }
        
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-lg);
            font-size: 0.9rem;
            color: var(--gray-600);
        }
        
        .breadcrumb a {
            color: var(--primary-color);
            text-decoration: none;
        }
        
        .breadcrumb a:hover {
            text-decoration: underline;
        }
        
        .job-detail-card {
            background-color: var(--white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            overflow: hidden;
        }
        
        .job-detail-header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: var(--white);
            padding: var(--spacing-xl);
        }
        
        .job-detail-badge {
            display: inline-block;
            background-color: var(--secondary-color);
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: var(--radius-sm);
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: var(--spacing-md);
        }
        
        .job-detail-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: var(--spacing-md);
            line-height: 1.3;
        }
        
        .job-detail-company {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            font-size: 1.125rem;
            margin-bottom: var(--spacing-lg);
        }
        
        .job-detail-meta {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-lg);
        }
        
        .meta-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }
        
        .meta-item i {
            font-size: 1.125rem;
        }
        
        .job-detail-body {
            padding: var(--spacing-xl);
        }
        
        .detail-section {
            margin-bottom: var(--spacing-xl);
            padding-bottom: var(--spacing-xl);
            border-bottom: 1px solid var(--gray-200);
        }
        
        .detail-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: var(--spacing-md);
            color: var(--gray-800);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }
        
        .section-title i {
            color: var(--primary-color);
        }
        
        .detail-list {
            list-style: none;
        }
        
        .detail-list li {
            padding: var(--spacing-sm) 0;
            display: flex;
            gap: var(--spacing-md);
        }
        
        .detail-list-label {
            font-weight: 600;
            color: var(--gray-700);
            min-width: 150px;
        }
        
        .detail-list-value {
            color: var(--gray-600);
            flex: 1;
        }
        
        .tag-list {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-sm);
        }
        
        .detail-tag {
            background-color: var(--primary-color);
            color: var(--white);
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: var(--radius-sm);
            font-size: 0.9rem;
        }
        
        .description-text {
            line-height: 1.8;
            color: var(--gray-700);
        }
        
        .action-buttons {
            display: flex;
            gap: var(--spacing-md);
            flex-wrap: wrap;
            margin-top: var(--spacing-xl);
        }
        
        .btn-apply {
            flex: 1;
            min-width: 200px;
            padding: var(--spacing-md) var(--spacing-xl);
            background-color: var(--secondary-color);
            color: var(--white);
            border: none;
            border-radius: var(--radius-md);
            font-size: 1.125rem;
            font-weight: 700;
            cursor: pointer;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-sm);
        }
        
        .btn-apply:hover {
            background-color: var(--secondary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-save {
            padding: var(--spacing-md) var(--spacing-xl);
            background-color: var(--white);
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            border-radius: var(--radius-md);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }
        
        .btn-save:hover {
            background-color: var(--primary-color);
            color: var(--white);
        }
        
        .related-jobs {
            margin-top: var(--spacing-xxl);
        }
        
        .related-jobs-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: var(--spacing-lg);
            color: var(--gray-800);
        }
        
        .error-message {
            text-align: center;
            padding: var(--spacing-xxl);
            background-color: var(--white);
            border-radius: var(--radius-lg);
            color: var(--gray-600);
        }
        
        @media (max-width: 768px) {
            .job-detail-title {
                font-size: 1.5rem;
            }
            
            .job-detail-meta {
                flex-direction: column;
                gap: var(--spacing-sm);
            }
            
            .detail-list li {
                flex-direction: column;
                gap: var(--spacing-xs);
            }
            
            .detail-list-label {
                min-width: auto;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .btn-apply,
            .btn-save {
                width: 100%;
            }
        }
    </style>
</head>
<body class="job-detail-page">
    <!-- Header / Navigation -->
    <header class="header">
        <nav class="nav-container">
            <div class="nav-logo">
                <a href="index.html">
                    <i class="fas fa-hard-hat"></i>
                    <span>建設マッチング</span>
                </a>
            </div>
            <button class="mobile-menu-toggle" id="mobileMenuToggle">
                <i class="fas fa-bars"></i>
            </button>
            <ul class="nav-menu" id="navMenu">
                <li><a href="index.html">ホーム</a></li>
                <li><a href="jobs.html" class="active">求人一覧</a></li>
                <li><a href="for-companies.html">企業の方へ</a></li>
                <li><a href="for-jobseekers.html">求職者の方へ</a></li>
                <li><a href="#" class="btn-login">ログイン</a></li>
                <li><a href="#" class="btn-register">新規登録</a></li>
            </ul>
        </nav>
    </header>

    <!-- Job Detail Content -->
    <div class="job-detail-container">
        <!-- Breadcrumb -->
        <div class="breadcrumb">
            <a href="index.html">ホーム</a>
            <i class="fas fa-chevron-right"></i>
            <a href="jobs.html">求人一覧</a>
            <i class="fas fa-chevron-right"></i>
            <span>求人詳細</span>
        </div>

        <div id="jobDetailContent">
            <!-- Content will be loaded via JavaScript -->
            <div class="loading" style="text-align: center; padding: var(--spacing-xxl);">
                求人情報を読み込んでいます...
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h4 class="footer-title">建設マッチングについて</h4>
                    <ul class="footer-links">
                        <li><a href="#">サービス概要</a></li>
                        <li><a href="#">運営会社</a></li>
                        <li><a href="#">お問い合わせ</a></li>
                        <li><a href="#">よくある質問</a></li>
                    </ul>
                </div>
                
                <div class="footer-col">
                    <h4 class="footer-title">求職者の方へ</h4>
                    <ul class="footer-links">
                        <li><a href="for-jobseekers.html">会員登録</a></li>
                        <li><a href="jobs.html">求人検索</a></li>
                        <li><a href="#">転職ガイド</a></li>
                        <li><a href="#">履歴書の書き方</a></li>
                    </ul>
                </div>
                
                <div class="footer-col">
                    <h4 class="footer-title">企業の方へ</h4>
                    <ul class="footer-links">
                        <li><a href="for-companies.html">求人掲載</a></li>
                        <li><a href="#">料金プラン</a></li>
                        <li><a href="#">採用事例</a></li>
                        <li><a href="#">採用ノウハウ</a></li>
                    </ul>
                </div>
                
                <div class="footer-col">
                    <h4 class="footer-title">法的情報</h4>
                    <ul class="footer-links">
                        <li><a href="#">利用規約</a></li>
                        <li><a href="#">プライバシーポリシー</a></li>
                        <li><a href="#">特定商取引法</a></li>
                        <li><a href="#">サイトマップ</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p class="copyright">&copy; 2024 建設現場監督マッチング. All rights reserved.</p>
                <div class="social-links">
                    <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                    <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                    <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                    <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/jobs-data.js"></script>
    <script src="js/main.js"></script>
    <script>
        // ページ読み込み時に求人詳細を表示
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const jobId = urlParams.get('id');
            
            if (jobId) {
                const job = getJobById(jobId);
                if (job) {
                    displayJobDetailContent(job);
                } else {
                    showJobNotFound();
                }
            } else {
                showJobNotFound();
            }
        });
        
        function displayJobDetailContent(job) {
            const container = document.getElementById('jobDetailContent');
            const badge = job.badge ? `<div class="job-detail-badge">${job.badge}</div>` : '';
            const tags = job.tags.map(tag => `<span class="detail-tag">${tag}</span>`).join('');
            
            container.innerHTML = `
                <div class="job-detail-card">
                    <!-- Header -->
                    <div class="job-detail-header">
                        ${badge}
                        <h1 class="job-detail-title">${job.title}</h1>
                        <div class="job-detail-company">
                            <i class="fas fa-building"></i>
                            <span>${job.company}</span>
                        </div>
                        <div class="job-detail-meta">
                            <div class="meta-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>${job.location}</span>
                            </div>
                            <div class="meta-item">
                                <i class="fas fa-yen-sign"></i>
                                <span>${job.salary}</span>
                            </div>
                            <div class="meta-item">
                                <i class="fas fa-briefcase"></i>
                                <span>${job.employmentType}</span>
                            </div>
                            <div class="meta-item">
                                <i class="fas fa-user-clock"></i>
                                <span>${job.experience}</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Body -->
                    <div class="job-detail-body">
                        <!-- 仕事内容 -->
                        <div class="detail-section">
                            <h2 class="section-title">
                                <i class="fas fa-file-alt"></i>
                                仕事内容
                            </h2>
                            <p class="description-text">
                                ${job.description || '詳細な仕事内容については、応募後に企業担当者より詳しくご説明いたします。'}
                            </p>
                        </div>
                        
                        <!-- 求める人材 -->
                        <div class="detail-section">
                            <h2 class="section-title">
                                <i class="fas fa-user-check"></i>
                                求める人材
                            </h2>
                            <div class="tag-list">
                                ${tags}
                            </div>
                            <ul class="detail-list" style="margin-top: var(--spacing-md);">
                                <li>
                                    <span class="detail-list-label">必要な経験:</span>
                                    <span class="detail-list-value">${job.experience}</span>
                                </li>
                                <li>
                                    <span class="detail-list-label">活かせる資格:</span>
                                    <span class="detail-list-value">${job.tags.join('、')}</span>
                                </li>
                            </ul>
                        </div>
                        
                        <!-- 勤務条件 -->
                        <div class="detail-section">
                            <h2 class="section-title">
                                <i class="fas fa-briefcase"></i>
                                勤務条件
                            </h2>
                            <ul class="detail-list">
                                <li>
                                    <span class="detail-list-label">雇用形態:</span>
                                    <span class="detail-list-value">${job.employmentType}</span>
                                </li>
                                <li>
                                    <span class="detail-list-label">勤務地:</span>
                                    <span class="detail-list-value">${job.location}</span>
                                </li>
                                <li>
                                    <span class="detail-list-label">勤務時間:</span>
                                    <span class="detail-list-value">8:00～17:00（実働8時間）</span>
                                </li>
                                <li>
                                    <span class="detail-list-label">休日休暇:</span>
                                    <span class="detail-list-value">土日祝日、GW、夏季休暇、年末年始</span>
                                </li>
                            </ul>
                        </div>
                        
                        <!-- 待遇・福利厚生 -->
                        <div class="detail-section">
                            <h2 class="section-title">
                                <i class="fas fa-gift"></i>
                                待遇・福利厚生
                            </h2>
                            <ul class="detail-list">
                                <li>
                                    <span class="detail-list-label">給与:</span>
                                    <span class="detail-list-value">${job.salary}</span>
                                </li>
                                <li>
                                    <span class="detail-list-label">昇給:</span>
                                    <span class="detail-list-value">年1回（4月）</span>
                                </li>
                                <li>
                                    <span class="detail-list-label">賞与:</span>
                                    <span class="detail-list-value">年2回（6月・12月）</span>
                                </li>
                                <li>
                                    <span class="detail-list-label">諸手当:</span>
                                    <span class="detail-list-value">通勤手当、住宅手当、家族手当、資格手当</span>
                                </li>
                                <li>
                                    <span class="detail-list-label">社会保険:</span>
                                    <span class="detail-list-value">健康保険、厚生年金、雇用保険、労災保険</span>
                                </li>
                                <li>
                                    <span class="detail-list-label">福利厚生:</span>
                                    <span class="detail-list-value">退職金制度、資格取得支援、社員寮完備</span>
                                </li>
                            </ul>
                        </div>
                        
                        <!-- 企業情報 -->
                        <div class="detail-section">
                            <h2 class="section-title">
                                <i class="fas fa-building"></i>
                                企業情報
                            </h2>
                            <ul class="detail-list">
                                <li>
                                    <span class="detail-list-label">企業名:</span>
                                    <span class="detail-list-value">${job.company}</span>
                                </li>
                                <li>
                                    <span class="detail-list-label">事業内容:</span>
                                    <span class="detail-list-value">総合建設業、建築設計、施工管理</span>
                                </li>
                                <li>
                                    <span class="detail-list-label">設立:</span>
                                    <span class="detail-list-value">1985年4月</span>
                                </li>
                                <li>
                                    <span class="detail-list-label">従業員数:</span>
                                    <span class="detail-list-value">320名</span>
                                </li>
                            </ul>
                        </div>
                        
                        <!-- アクションボタン -->
                        <div class="action-buttons">
                            <button class="btn-apply" id="applyBtn">
                                <i class="fas fa-paper-plane"></i>
                                この求人に応募する
                            </button>
                            <button class="btn-save">
                                <i class="fas fa-bookmark"></i>
                                お気に入りに保存
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 関連求人 -->
                <div class="related-jobs">
                    <h2 class="related-jobs-title">この求人に関連する求人</h2>
                    <div class="jobs-grid" id="relatedJobs"></div>
                </div>
            `;
            
            // 関連求人を表示
            displayRelatedJobs(job);
            
            // 応募ボタンのイベント
            document.getElementById('applyBtn').addEventListener('click', function() {
                alert('応募機能は現在準備中です。\n\n本番環境では、ログイン後に応募フォームが表示され、プロフィール情報と履歴書を企業に送信できます。');
            });
        }
        
        function displayRelatedJobs(currentJob) {
            const container = document.getElementById('relatedJobs');
            if (!container) return;
            
            // 同じ地域または同じタグを持つ求人を関連求人として表示
            const related = jobsData
                .filter(job => job.id !== currentJob.id)
                .filter(job => 
                    job.location.includes(currentJob.location.split('都')[0].split('府')[0].split('県')[0]) ||
                    job.tags.some(tag => currentJob.tags.includes(tag))
                )
                .slice(0, 3);
            
            if (related.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--gray-600);">関連する求人がありません。</p>';
                return;
            }
            
            container.innerHTML = related.map(job => createJobCard(job)).join('');
        }
        
        function showJobNotFound() {
            const container = document.getElementById('jobDetailContent');
            container.innerHTML = `
                <div class="error-message">
                    <i class="fas fa-exclamation-circle" style="font-size: 4rem; color: var(--danger); margin-bottom: var(--spacing-md);"></i>
                    <h2 style="margin-bottom: var(--spacing-md);">求人情報が見つかりませんでした</h2>
                    <p style="margin-bottom: var(--spacing-lg);">お探しの求人は削除されたか、URLが正しくない可能性があります。</p>
                    <a href="jobs.html" class="btn-primary" style="display: inline-block; padding: var(--spacing-sm) var(--spacing-xl); border-radius: var(--radius-md); text-decoration: none;">
                        <i class="fas fa-search"></i> 求人一覧に戻る
                    </a>
                </div>
            `;
        }
    </script>
</body>
</html>